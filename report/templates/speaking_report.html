<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Speaking Report</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        h2 { color: #333; }
        .section { margin-bottom: 20px; }
        pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Speaking Practice Report</h1>

    <div class="section">
        <h2>Test</h2>
        <p>{{ test_type }}</p>
    </div>

    <div class="section">
        <h2>Task</h2>
        <p>{{ task_type }}</p>
    </div>

    <div class="section">
        <h2>Your Answer</h2>
        <pre>{{ user_text }}</pre>
        <p><strong>Word Count:</strong> {{ word_count }}</p>
    </div>

    {% if feedback %}
    <div class="section">
        <h2>Feedback</h2>
        <p><strong>Score:</strong> {{ feedback.score }}/10</p>
        <p><strong>Grammar & Spelling Errors:</strong></p>
        <ul>
            {% for err in feedback.grammar_and_spell_errors %}
            <li>{{ err }}</li>
            {% endfor %}
        </ul>
        <p><strong>Corrected Text:</strong></p>
        <pre>{{ feedback.corrected_text }}</pre>
        <p><strong>Improved Text:</strong></p>
        <pre>{{ feedback.improved_text }}</pre>
        <p><strong>Explanation:</strong></p>
        <pre>{{ feedback.explanation }}</pre>
        <p><strong>Comment:</strong></p>
        <pre>{{ feedback.feedback }}</pre>
    </div>
    {% endif %}
</body>
</html>
